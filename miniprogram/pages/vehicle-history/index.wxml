<!--pages/vehicle-history/index.wxml-->
<view class="page">
  <view class="header">{{plate}} · 历史记录</view>

  <view wx:if="{{loading}}" class="hint">加载中...</view>

  <block wx:elif="{{list.length > 0}}">
    <block wx:for="{{list}}" wx:key="_id">
      <view class="item">
        <view class="row1">
          <text class="time">{{item.createdAtFormatted}}</text>
          <text class="status-change">{{item.fromStatus}} → {{item.toStatus}}</text>
        </view>
        <view class="row2">
          当前司机：{{item.driverName || '无'}}
        </view>
        <view class="row2" wx:if="{{item.contractId}}">
          合同ID：{{item.contractId}}
        </view>
      </view>
    </block>
  </block>

  <view wx:elif="{{!loading && list.length === 0}}" class="hint">
    暂无历史记录
  </view>
</view>
